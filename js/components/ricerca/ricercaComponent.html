<!-- condizione ricerca posizioni -->

<div ng-if="$ctrl.tipoRicerca == 'Posizione'" class="row">
    <div class="col-md-4 form-group">
        <label>{{ 'CODICE_FISCALE' | translate }}</label>
        <input type="text" class="form-control" ng-model="$ctrl.findCodiceFiscale" placeholder="Codice fiscale da ricercare">
    </div>
    <div class="col-md-4 form-group">
        <label>{{ 'COGNOME' | translate }}</label>
        <input type="text" class="form-control" ng-model="$ctrl.findCognome" placeholder="Cognome da ricercare">
    </div>
    <div class="col-md-4 form-group">
        <label>{{ 'NOME' | translate }}</label>
        <input type="text" class="form-control" ng-model="$ctrl.findNome" placeholder="Nome da ricercare">
    </div>
    <div class="col-md-4 form-group">
        <label>{{ 'DATA_DI_NASCITA' | translate }}</label>
        <div class="input-group date">
            <input type="text" class="form-control js-date" ng-model="$ctrl.findDataDiNascita" placeholder="Data nascita da ricercare formato dd/MM/yyyy">
            <span class="input-group-addon">
                <i class="fa fa-calendar"></i>
            </span>
        </div>
    </div>
    <div class="col-md-4 form-group">
        <label>{{ 'POSIZIONE' | translate }}</label>
        <input type="text" class="form-control intero" ng-model="$ctrl.findPosizione" placeholder="Posizione da ricercare">
    </div>
    <div class="col-md-4 form-group">
        <label>{{ 'NUMERO_FASCICOLO' | translate }}</label>
        <input type="text" class="form-control intero" ng-model="$ctrl.findNumeroFascicolo" placeholder="Numero fascicolo da ricercare">
    </div>
    <div class="col-md-4 form-group">
        <label>{{ 'NUMERO_FALDONE_ARCHIVIAZIONE' | translate }}</label>
        <input type="text" class="form-control intero" ng-model="$ctrl.findNumeroFaldoneArchiviazione" placeholder="Numero faldone archiviazione da ricercare">
    </div>
    <div class="col-md-4 form-group">
        <label>{{ 'ANNO_DI_SCARTO' | translate }}</label>
        <input type="text" class="form-control anno" ng-model="$ctrl.findAnnoDiScarto" placeholder="Anno di scarto da ricercare">
    </div>

</div>

<!-- condizione ricerca anagrafe -->

<div ng-if="$ctrl.tipoRicerca.includes('Anagrafe')" class="row">
    <div class="col-md-6 form-group">
        <label>{{ 'COGNOME' | translate }}</label>
        <input type="text" class="form-control" ng-model="$ctrl.findCognome" placeholder="Cognome da ricercare">
    </div>
    <div class="col-md-6 form-group">
        <label>{{ 'NOME' | translate }}</label>
        <input type="text" class="form-control" ng-model="$ctrl.findNome" placeholder="Nome da ricercare">
    </div>
    <div class="col-md-6 form-group">
        <label>{{ 'CODICE_FISCALE' | translate }}</label>
        <input type="text" class="form-control" ng-model="$ctrl.findCodiceFiscale" placeholder="Codice fiscale da ricercare">
    </div>
    <div class="col-md-6 form-group">
        <label>{{ 'DATA_DI_NASCITA' | translate }}</label>
        <div class="input-group date">
            <input type="text" class="form-control js-date" ng-model="$ctrl.findDataDiNascita" placeholder="Data nascita da ricercare formato dd/MM/yyyy">
            <span class="input-group-addon">
                <i class="fa fa-calendar"></i>
            </span>
        </div>
    </div>
    <div ng-if="!$ctrl.tipoRicerca.includes('Curatore')" id="filtri_deceduto">
        <div class="col-md-6 form-group">
            <label>{{ 'NUMERO_FALDONE_ARCHIVIAZIONE' | translate }}</label>
            <input type="text" class="form-control intero" ng-model="$ctrl.findNumeroFaldoneArchiviazione" placeholder="Numero faldone archiviazione da ricercare">
        </div>
        <div class="col-md-6 form-group">
            <label>{{ 'ANNO_DI_SCARTO' | translate }}</label>
            <input type="text" class="form-control anno" ng-model="$ctrl.findAnnoDiScarto" placeholder="Anno di scarto da ricercare">
        </div>

    </div>
</div>

<div class="row text-right">
    <div class="col-sm-12">
        <button class="btn btn-primary btn-sm" id="anagSearch" ng-click="$ctrl.find()">{{ 'CERCA' | translate }}</button>
    </div>
</div>

<!-- risultati ricerca -->
<div class="row" id="anagResults" style="display:none;margin-top:10px">

    <!-- ng-if="true" Ã¨ stato inserito x ie-->
    <table ng-if="true" datatable="ng" dt-options="$ctrl.dtOptions" class="table table-bordered table-striped">
        <thead>
            <tr>
                <th ng-if="$ctrl.tipoRicerca == 'Posizione'">{{ 'POSIZIONE' | translate }}</th>
                <th>{{ 'COGNOME' | translate }}</th>
                <th>{{ 'NOME' | translate }}</th>
                <th>{{ 'CODICE_FISCALE' | translate }}</th>
                <th>{{ 'DATA_DI_NASCITA' | translate }}</th>
                <th>{{ 'DATA_DECESSO' | translate }}</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="item in $ctrl.elencoAssistiti">
                <td ng-if="$ctrl.tipoRicerca == 'Posizione'">
                    <a ng-click="$ctrl.findPosizione(item.CodiceFiscale)">{{item.Posizione}}</a>
                </td>
                <td>{{item.Cognome}}</td>
                <td>{{item.Nome}}</td>
                <td>
                    <a ng-click="$ctrl.findCodFis(item.CodiceFiscale)" angular-popover direction="top" close-on-click="true"
                        template-url="/views/partials/_popover_anagrafica" style="position: relative; z-index: 100;">{{item.CodiceFiscale}}</a>

                    <!-- <a uib-popover-template="'/views/partials/_popover_anagrafica'" >{{item.CodiceFiscale}}</a> -->


                </td>
                <td>{{item.DataDiNascita}}</td>
                <td>{{item.DataDiDecesso}}</td>
            </tr>
        </tbody>
    </table>
    <div ng-if="$ctrl.tipoRicerca == 'Posizione'" class="text-right m-t-lg">
        <a class="btn btn-sm btn-primary" ui-sref="domande.nuova_domanda">Inserisci nuova posizione</a>
    </div>
    <div ng-if="$ctrl.tipoRicerca.includes('Anagrafe')" class="text-right m-t-lg">
        <a class="btn btn-sm btn-primary" ng-click="$ctrl.creaNuovaAnagrafica()">Inserisci nuova anagrafica</a>
    </div>

</div>

<script>
    $(document).ready(function () {

        $('#anagSearch').click(function () {
            $("#anagResults").show();
        });

        setTimeout(function () {
            $('.input-group.date').datepicker({
                todayBtn: "linked",
                format: 'dd/mm/yyyy',
                keyboardNavigation: false,
                forceParse: true,
                calendarWeeks: true,
                autoclose: true
                //orientation: 'bottom left'
            });
        }, 500);
    })
</script>