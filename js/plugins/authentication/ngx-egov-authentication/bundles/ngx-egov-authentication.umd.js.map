{"version":3,"file":"ngx-egov-authentication.umd.js","sources":["../@siag/ngx-egov-authentication.es5.js"],"sourcesContent":["import { Directive, ElementRef, Input, NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { Authentication } from '@siag/js-egov-authentication';\r\nimport { EgovUserwidget } from '@siag/jsui-egov-authentication';\r\nimport { Observable } from 'rxjs';\r\nimport 'rxjs/add/operator/map';\r\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\nvar EgovUserWidgetDirective = /** @class */ (function () {\r\n    /**\r\n     * @param {?} elementRef\r\n     */\r\n    function EgovUserWidgetDirective(elementRef) {\r\n        this.elementRef = elementRef;\r\n    }\r\n    /**\r\n     * @return {?}\r\n     */\r\n    EgovUserWidgetDirective.prototype.ngOnInit = function () {\r\n        var /** @type {?} */ userwidget = new EgovUserwidget(this.elementRef.nativeElement, this.config);\r\n        if (this.user) {\r\n            // if we get the user in, handle it ourself\r\n            console.log('render userwidget with user input');\r\n            userwidget.render({ user: this.user });\r\n        }\r\n        else {\r\n            console.log('render userwidget plain');\r\n            userwidget.render();\r\n        }\r\n    };\r\n    return EgovUserWidgetDirective;\r\n}());\r\nEgovUserWidgetDirective.decorators = [\r\n    { type: Directive, args: [{\r\n                // tslint:disable-next-line:directive-selector\r\n                selector: '[egov-userwidget]'\r\n            },] },\r\n];\r\n/** @nocollapse */\r\nEgovUserWidgetDirective.ctorParameters = function () { return [\r\n    { type: ElementRef, },\r\n]; };\r\nEgovUserWidgetDirective.propDecorators = {\r\n    \"config\": [{ type: Input },],\r\n    \"user\": [{ type: Input },],\r\n};\r\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\nvar EGovAuthModule = /** @class */ (function () {\r\n    function EGovAuthModule() {\r\n    }\r\n    /**\r\n     * @return {?}\r\n     */\r\n    EGovAuthModule.forRoot = function () {\r\n        return {\r\n            ngModule: EGovAuthModule\r\n        };\r\n    };\r\n    /**\r\n     * @param {?} config\r\n     * @param {?=} http\r\n     * @return {?}\r\n     */\r\n    EGovAuthModule.Configure = function (config, http) {\r\n        if (undefined === config.httpLibrary && undefined !== http) {\r\n            config.httpLibrary = function (options) {\r\n                return http\r\n                    .request(options.method, options.url, {\r\n                    //headers: options.headers,\r\n                    body: options.data\r\n                })\r\n                    .toPromise();\r\n            };\r\n        }\r\n        Authentication.configure(config);\r\n    };\r\n    /**\r\n     * @return {?}\r\n     */\r\n    EGovAuthModule.GetCurrent = function () {\r\n        return Observable.from(Authentication.getCurrent());\r\n    };\r\n    return EGovAuthModule;\r\n}());\r\nEGovAuthModule.decorators = [\r\n    { type: NgModule, args: [{\r\n                imports: [CommonModule],\r\n                declarations: [EgovUserWidgetDirective],\r\n                exports: [EgovUserWidgetDirective]\r\n            },] },\r\n];\r\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\nvar EGovAuthHttp = /** @class */ (function () {\r\n    function EGovAuthHttp() {\r\n    }\r\n    /**\r\n     * @param {?} res\r\n     * @return {?}\r\n     */\r\n    EGovAuthHttp.ErrorInterceptor = function (res) {\r\n        Authentication.handleAjaxResponse({\r\n            url: res.url,\r\n            status: res.status,\r\n            getResponseHeader: function (headerName) {\r\n                return res.headers[headerName];\r\n            },\r\n            getResponseBody: function () {\r\n                // Example, catch 401 errors\r\n                if (res.status === 403) {\r\n                    return res.json();\r\n                }\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * @param {?} config\r\n     * @param {?} http\r\n     * @return {?}\r\n     */\r\n    EGovAuthHttp.Configure = function (config, http) {\r\n        // default Http for angular 2\r\n        if (undefined == config.httpLibrary) {\r\n            config.httpLibrary = function (options) {\r\n                return http\r\n                    .request(options.url, {\r\n                    method: options.method,\r\n                    //headers: options.headers,\r\n                    body: options.data\r\n                })\r\n                    .map(function (x) { return x.json(); })\r\n                    .toPromise();\r\n            };\r\n        }\r\n        EGovAuthModule.Configure(config);\r\n    };\r\n    return EGovAuthHttp;\r\n}());\r\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\n/**\r\n * @fileoverview added by tsickle\r\n * @suppress {checkTypes} checked by tsc\r\n */\r\n/**\r\n * Generated bundle index. Do not edit.\r\n */\r\nexport { EGovAuthModule, EGovAuthHttp, EgovUserWidgetDirective as Éµa };\r\n//# sourceMappingURL=ngx-egov-authentication.es5.js.map\n"],"names":["EgovUserwidget","Directive","ElementRef","Input","Authentication","Observable","NgModule","CommonModule"],"mappings":"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"}