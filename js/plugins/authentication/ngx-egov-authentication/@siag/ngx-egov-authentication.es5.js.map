{"version":3,"file":"ngx-egov-authentication.es5.js","sources":["../../../modules/ngx-egov-authentication/src/egov-userwidget-http.ts","../../../modules/ngx-egov-authentication/src/egov-userwidget_module.ts","../../../modules/ngx-egov-authentication/src/egov-userwidget.component.ts"],"sourcesContent":["import { Http, Response } from '@angular/http';\r\nimport 'rxjs/add/operator/map';\r\nimport { Authentication, EgovAuthConfiguration } from '@siag/js-egov-authentication';\r\nimport { EGovAuthModule } from './egov-userwidget_module';\r\n\r\nexport class EGovAuthHttp {\r\n    public static ErrorInterceptor(res: Response) {\r\n        Authentication.handleAjaxResponse({\r\n            url: res.url,\r\n            status: res.status,\r\n            getResponseHeader: function (headerName) {\r\n                return res.headers[headerName];\r\n            },\r\n            getResponseBody: function () {\r\n                // Example, catch 401 errors\r\n                if (res.status === 403) {\r\n                    return res.json();\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    public static Configure(config: EgovAuthConfiguration, http: Http) {\r\n        // default Http for angular 2\r\n        if (undefined == config.httpLibrary) {\r\n            config.httpLibrary = options => {\r\n              return http\r\n                .request(options.url, {\r\n                  method: options.method,\r\n                  //headers: options.headers,\r\n                  body: options.data\r\n                })\r\n                .map(x => x.json())\r\n                .toPromise();\r\n            }\r\n        }\r\n    \r\n        EGovAuthModule.Configure(config);\r\n    }\r\n}","import { ModuleWithProviders } from '@angular/core';\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { EgovUserWidgetDirective } from './egov-userwidget.component';\r\nimport { EGovAuthHttp } from './egov-userwidget-http';\r\nimport { Observable } from 'rxjs';\r\nimport { HTTP_INTERCEPTORS, HttpClient } from '@angular/common/http';\r\nimport { User, Authentication, EgovAuthConfiguration } from '@siag/js-egov-authentication';\r\n\r\n@NgModule({\r\n    imports: [CommonModule],\r\n    declarations: [EgovUserWidgetDirective],\r\n    exports: [EgovUserWidgetDirective]\r\n})\r\nexport class EGovAuthModule {\r\n    static forRoot(): ModuleWithProviders {\r\n        return {\r\n            ngModule: EGovAuthModule\r\n        };\r\n    }\r\n\r\n    public static Configure(config: EgovAuthConfiguration, http?: HttpClient) {\r\n        if (undefined === config.httpLibrary && undefined !== http) {\r\n            config.httpLibrary = options =>{\r\n                return http\r\n                  .request(options.method, options.url, {\r\n                    //headers: options.headers,\r\n                    body: options.data\r\n                  })\r\n                  .toPromise();\r\n              }\r\n        }\r\n        Authentication.configure(config);\r\n    }\r\n    \r\n    public static GetCurrent(): Observable<User> {\r\n        return Observable.from(Authentication.getCurrent()); \r\n    }\r\n}","import { Directive, Input, OnInit, ElementRef } from '@angular/core';\r\nimport { User, EgovAuthConfiguration } from '@siag/js-egov-authentication';\r\nimport { EgovUserwidget } from '@siag/jsui-egov-authentication';\r\n\r\n@Directive({\r\n  // tslint:disable-next-line:directive-selector\r\n  selector: '[egov-userwidget]'\r\n})\r\nexport class EgovUserWidgetDirective implements OnInit {\r\n  @Input() config: EgovAuthConfiguration;\r\n  @Input() user: User;\r\n\r\n  constructor(private elementRef: ElementRef) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    const userwidget = new EgovUserwidget(this.elementRef.nativeElement, this.config);\r\n\r\n    if (this.user) {\r\n      // if we get the user in, handle it ourself\r\n      console.log('render userwidget with user input');\r\n      userwidget.render({ user: this.user });\r\n    } else {\r\n      console.log('render userwidget plain');\r\n      userwidget.render();\r\n    }\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}