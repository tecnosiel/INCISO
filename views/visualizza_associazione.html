<div class="row wrapper border-bottom white-bg page-heading">
    <div class="col-lg-10">
        <h2 ng-if="inserimentoAssociazione">{{ 'INSERIMENTO_DATI_ANAGRAFICI_ASSOCIAZIONE' | translate }}</h2>
        <h2 ng-if="!inserimentoAssociazione">{{ 'VISUALIZZA_DATI_ANAGRAFICI_ASSOCIAZIONE' | translate }}</h2>

        <ol class="breadcrumb">
            <li>
                <a href="index.html">{{ 'HOME' | translate }}</a>
            </li>
            <li>
                <a href="ricerca_associazione.html">Ricerca associazione</a>
            </li>
            <li class="active">
                <strong>{{datiAssociazione.CodiceFiscale}}</strong>
            </li>
        </ol>
    </div>
    <div class="col-lg-2">

    </div>
</div>
<div class="wrapper wrapper-content animated fadeInRight">

    <div class="row">
        <div class="col-lg-12">
            <div ng-if="!inserimentoAssociazione" class="row text-left" style="margin-bottom:15px">
                <div ng-if="!visDatiAssociazione" class="col-sm-12">
                    <button class="btn btn-danger btnToggleBlock" ng-click="visDatiAssociazioneToggle()">{{
                        'BLOCCA_CAMPI' | translate }}</button>
                </div>
                <div ng-if="visDatiAssociazione" class="col-sm-12">
                    <button class="btn btn-primary btnToggleBlock" ng-click="visDatiAssociazioneToggle()">{{
                        'SBLOCCA_CAMPI' | translate }}</button>
                </div>
            </div>

            <!-- --------- -->
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5> Dati generali </h5>
                    <div class="ibox-tools">
                        <a class="collapse-link">
                            <i class="fa fa-chevron-up"></i>
                        </a>
                    </div>
                </div>

                <div class="ibox-content">
                    <div class="row">
                        <div class="col-md-4 form-group">
                            <label>Nome associazione</label>
                            <input type="text" ng-readonly="visDatiAssociazione" class="form-control" value="{{datiAssociazione.NomeAssociazione}}">
                        </div>
                        <div class="col-md-4 form-group">
                            <label>Codice fiscale</label>
                            <input type="text" ng-readonly="visDatiAssociazione" class="form-control" value="{{datiAssociazione.CodiceFiscale}}">
                        </div>
                        <div class="col-md-4 form-group">
                            <label>
                                Tipologia di assistenza
                            </label>
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="checkbox">
                                        <label> <input ng-readonly="visDatiAssociazione" icheck type="radio" ng-model="datiAssociazione.TipologiaDiAssistenza"
                                                ng-checked="datiAssociazione.TipologiaDiAssistenza=='77'" name="a">
                                            <i></i> 77
                                        </label>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="checkbox">
                                        <label> <input ng-readonly="visDatiAssociazione" icheck type="radio" ng-model="datiAssociazione.TipologiaDiAssistenza"
                                                ng-checked="datiAssociazione.TipologiaDiAssistenza=='88'" name="b">
                                            <i></i> 88
                                        </label>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="checkbox">
                                        <label> <input ng-readonly="visDatiAssociazione" icheck type="radio" ng-model="datiAssociazione.TipologiaDiAssistenza"
                                                ng-checked="datiAssociazione.TipologiaDiAssistenza=='99'" name="c">
                                            <i></i> 99
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 form-group">
                            <label>Responsabile</label>
                            <input type="text" ng-readonly="visDatiAssociazione" class="form-control" value="{{datiAssociazione.Responsabile}}">
                        </div>
                        <div class="col-md-4 form-group">
                            <label>Telefono principale</label>
                            <input type="text" ng-readonly="visDatiAssociazione" class="form-control" value="{{datiAssociazione.TelefonoPrincipale}}">
                        </div>
                        <div class="col-md-4 form-group">
                            <label>Telefono secondario</label>
                            <input type="text" ng-readonly="visDatiAssociazione" class="form-control" value="{{datiAssociazione.TelefonoSecondario}}">
                        </div>
                        <div class="col-md-4 form-group">
                            <label>IBAN</label>
                            <input type="text" ng-readonly="visDatiAssociazione" class="form-control" value="{{datiAssociazione.IBAN}}">
                        </div>
                        <div class="col-md-4 form-group">
                            <label>Email</label>
                            <input type="text" ng-readonly="visDatiAssociazione" class="form-control" value="{{datiAssociazione.Email}}">
                        </div>
                        <div class="col-md-4 form-group">
                            <label>PEC</label>
                            <input type="text" ng-readonly="visDatiAssociazione" class="form-control" value="{{datiAssociazione.Pec}}">
                        </div>
                        <div class="col-md-12 form-group">
                            <label>Note</label>
                            <textarea ng-model="datiAssociazione.Note" ng-readonly="visDatiAssociazione" class="form-control"></textarea>
                        </div>

                    </div>
                </div>
            </div>
            <!-- --------- -->
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5> {{ "ELENCO_INDIRIZZI" | translate}} </h5>
                    <div class="ibox-tools">
                        <a class="collapse-link">
                            <i class="fa fa-chevron-up"></i>
                        </a>
                    </div>
                </div>
                <div class="ibox-content">
                    <div class="row">
                        <table class="table table-bordered table-striped">
                            <thead>
                                <tr>
                                    <th class="col-md-2">Tipo</th>
                                    <th class="col-md-3">Indirizzo</th>
                                    <th class="col-md-2">Validit√†</th>
                                    <th class="col-md-3">Note</th>
                                    <th class="col-md-1"></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="item in datiAssociazione.Indirizzi">
                                    <td>{{item.Tipo}}</td>
                                    <td>
                                        {{item.Indirizzo}}
                                    </td>
                                    <td>{{item.Validita}}</td>
                                    <td>{{item.Note}}</td>
                                    <td style="text-align: center">

                                        <a ng-click="creaNuovoIndirizzo($index)" ng-class="{anchorDisabled : visDatiAssociazione}"><i
                                                class="fa fa-pencil"></i></a>
                                        <a ng-class="{anchorDisabled : visDatiAssociazione}" ng-click="deleteIndirizzo()"><i
                                                class="fa fa-trash"></i></a>
                                    </td>
                                </tr>
                            </tbody>
                        </table>

                        <div class="row text-right">
                            <div class="col-sm-12">
                                <button class="btn btn-primary" id="anagSearch" ng-disabled="visDatiAssociazione"
                                    ng-click="creaNuovoIndirizzo(-1)">{{
                                    'CREA_NUOVO_INDIRIZZO'
                                    | translate }}</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- --------- -->

            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5> Altri dati </h5>
                    <div class="ibox-tools">
                        <a class="collapse-link">
                            <i class="fa fa-chevron-up"></i>
                        </a>
                    </div>
                </div>

                <div class="ibox-content">
                    <div class="row">
                        <div class="col-md-4 form-group"><label>Importo ritenuta di categoria (quota mensile)</label>
                            <input type="text" ng-readonly="visDatiAssociazione" class="form-control" value="{{datiAssociazione.ImportoRitenutaDiCategoria | currency}} "></div>
                    </div>
                </div>
            </div>
            <!-- --------- -->
            <div ng-if="visDatiAssociazione" visDatiAssociazione class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5> Elenco ritenute sulle liquidazioni mensili </h5>
                    <div class="ibox-tools">
                        <a class="collapse-link">
                            <i class="fa fa-chevron-up"></i>
                        </a>
                    </div>
                </div>

                <div class="ibox-content">

                    <table datatable="ng" dt-options="dtOptionsRicercaAssociazioni" class="table table-striped table-bordered dataTables-paged">

                        <thead>
                            <tr>
                                <th class="col-md-4">Data</th>
                                <th class="col-md-4">Importo totale ritenuta di categoria</th>
                                <th class="col-md-4">Numero di assistiti paganti</th>
                            </tr>
                        </thead>

                        <tbody>
                            <tr ng-repeat="item in datiAssociazione.LiquidazioniMensili">
                                <td>{{item.DataPagamento}}</td>
                                <td>{{item.ImportoTotale | currency}}</td>
                                <td>{{item.NroAssistiti}}</td>
                            </tr>
                        </tbody>

                    </table>

                </div>
            </div>

            <!-- SUBMIT BUTTON -->
            <!-- <button type="submit" class="btn btn-primary" ng-disabled="userForm.$invalid">Invia</button> -->
            <div class="row text-right">
                <div ng-if="inserimentoAssociazione || !visDatiAssociazione" class="col-sm-12" style="margin-top:5px;margin-bottom:15px">
                    <button type="submit" class="btn btn-primary" ng-click="salvaModulo()" ng-disabled="userForm.$invalid">{{
                        'SALVA' | translate }}</button>
                </div>
            </div>

        </div>
    </div>
</div>

<script>

    // Custom scripts
    $(document).ready(function () {

        $('.ibox-title').click(function () {
            var cl = $(this).find('.collapse-link');
            var ibox = cl.closest('div.ibox');
            var button = cl.find('i');
            var content = ibox.find('div.ibox-content');
            content.slideToggle(200);
            button.toggleClass('fa-chevron-up').toggleClass('fa-chevron-down');
            ibox.toggleClass('').toggleClass('border-bottom');
            setTimeout(function () {
                ibox.resize();
                ibox.find('[id^=map-]').resize();
            }, 50);
        });

    })


</script>