<div class="row wrapper border-bottom white-bg page-heading">
    <header-component ng-if="inserimentoAssociazione" tipo="'Dettaglio'" titolo="'INSERIMENTO_DATI_ANAGRAFICI_ASSOCIAZIONE'"
        paths="[{href:'index.html',descrizione:'HOME'}, {href:'ricerca_associazione.html',descrizione:'RICERCA_ASSOCIAZIONE'}]"
        active="{{datiAssociazione.CodiceFiscale}}"></header-component>
    <header-component ng-if="!inserimentoAssociazione" tipo="'Dettaglio'" titolo="'VISUALIZZA_DATI_ANAGRAFICI_ASSOCIAZIONE'"
        paths="[{href:'index.html',descrizione:'HOME'}, {href:'ricerca_associazione.html',descrizione:'RICERCA_ASSOCIAZIONE'}]"
        active="{{datiAssociazione.CodiceFiscale}}"></header-component>

    <div class="col-lg-2">
    </div>
</div>

<div class="wrapper wrapper-content animated fadeInRight">

    <div class="row">
        <div class="col-lg-12">
            <div ng-if="!inserimentoAssociazione" class="row text-left" style="margin-bottom:15px">
                <div ng-if="!visDatiAssociazione" class="col-sm-12">
                    <button class="btn btn-danger btnToggleBlock" ng-click="visDatiAssociazioneToggle()">{{
                        'BLOCCA_CAMPI' | translate }}</button>
                </div>
                <div ng-if="visDatiAssociazione" class="col-sm-12">
                    <button class="btn btn-primary btnToggleBlock" ng-click="visDatiAssociazioneToggle()">{{
                        'SBLOCCA_CAMPI' | translate }}</button>
                </div>
            </div>

            <!-- --------- -->
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5> {{ 'DATI_GENERALI' | translate }} {{asteriscoInserimento}}</h5>
                    <div class="ibox-tools">
                        <a class="collapse-link">
                            <i class="fa fa-chevron-up"></i>
                        </a>
                    </div>
                </div>

                <div class="ibox-content">
                    <div class="row">
                        <div class="col-md-4 form-group">
                            <label>{{ 'NOME_ASSOCIAZIONE' | translate }} {{asteriscoInserimento}}</label>
                            <input type="text" ng-readonly="visDatiAssociazione" class="form-control" value="{{datiAssociazione.NomeAssociazione}}">
                        </div>
                        <div class="col-md-4 form-group">
                            <label>{{ 'CODICE_FISCALE' | translate }} {{asteriscoInserimento}}</label>
                            <input type="text" ng-readonly="visDatiAssociazione" class="form-control" value="{{datiAssociazione.CodiceFiscale}}">
                        </div>
                        <div class="col-md-4 form-group">
                            <label>
                                {{ 'TIPOLOGIA_DI_ASSISTENZA' | translate }} {{asteriscoInserimento}}
                            </label>
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="checkbox">
                                        <label> <input ng-disabled="visDatiAssociazione" icheck type="radio" ng-model="datiAssociazione.TipologiaDiAssistenza"
                                                ng-checked="datiAssociazione.TipologiaDiAssistenza=='77'" name="a" >
                                            <i></i> 77
                                        </label>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="checkbox">
                                        <label> <input ng-disabled="visDatiAssociazione" icheck type="radio" ng-model="datiAssociazione.TipologiaDiAssistenza"
                                                ng-checked="datiAssociazione.TipologiaDiAssistenza=='88'" name="a">
                                            <i></i> 88
                                        </label>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="checkbox">
                                        <label> <input ng-disabled="visDatiAssociazione" icheck type="radio" ng-model="datiAssociazione.TipologiaDiAssistenza"
                                                ng-checked="datiAssociazione.TipologiaDiAssistenza=='99'" name="a">
                                            <i></i> 99
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 form-group">
                            <label>{{ 'RESPONSABILE' | translate }}</label>
                            <input type="text" ng-readonly="visDatiAssociazione" class="form-control" value="{{datiAssociazione.Responsabile}}">
                        </div>
                        <div class="col-md-4 form-group">
                            <label>{{ 'TELEFONO_PRINCIPALE' | translate }} {{asteriscoInserimento}}</label>
                            <input type="text" ng-readonly="visDatiAssociazione" class="form-control" value="{{datiAssociazione.TelefonoPrincipale}}">
                        </div>
                        <div class="col-md-4 form-group">
                            <label>{{ 'TELEFONO_SECONDARIO' | translate }}</label>
                            <input type="text" ng-readonly="visDatiAssociazione" class="form-control" value="{{datiAssociazione.TelefonoSecondario}}">
                        </div>
                        <div class="col-md-4 form-group">
                            <label>{{ 'IBAN' | translate }}</label>
                            <input type="text" ng-readonly="visDatiAssociazione" class="form-control" value="{{datiAssociazione.IBAN}}">
                        </div>
                        <div class="col-md-4 form-group">
                            <label>{{ 'EMAIL' | translate }}</label>
                            <input type="text" ng-readonly="visDatiAssociazione" class="form-control" value="{{datiAssociazione.Email}}">
                        </div>
                        <div class="col-md-4 form-group">
                            <label>{{ 'PEC' | translate }}</label>
                            <input type="text" ng-readonly="visDatiAssociazione" class="form-control" value="{{datiAssociazione.Pec}}">
                        </div>
                        <div class="col-md-12 form-group">
                            <label>{{ 'NOTE' | translate }}</label>
                            <textarea ng-model="datiAssociazione.Note" ng-readonly="visDatiAssociazione" class="form-control"></textarea>
                        </div>

                    </div>
                </div>
            </div>
            <!-- --------- -->
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5> {{ "ELENCO_INDIRIZZI" | translate}} {{asteriscoInserimento}}</h5>
                    <div class="ibox-tools">
                        <a class="collapse-link">
                            <i class="fa fa-chevron-up"></i>
                        </a>
                    </div>
                </div>
                <div class="ibox-content">
                    <div class="row">
                        <table class="table table-bordered table-striped">
                            <thead>
                                <tr>
                                    <th class="col-md-2">{{ 'TIPO' | translate }}</th>
                                    <th class="col-md-3">{{ 'INDIRIZZO' | translate }}</th>
                                    <th class="col-md-2">{{ 'VALIDITA' | translate }}</th>
                                    <th class="col-md-3">{{ 'NOTE' | translate }}</th>
                                    <th class="col-md-1"></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="item in datiAssociazione.Indirizzi">
                                    <td>{{item.Tipo}}</td>
                                    <td>
                                        {{item.Indirizzo}}
                                    </td>
                                    <td>{{item.Validita}}</td>
                                    <td>{{item.Note}}</td>
                                    <td style="text-align: center">

                                        <a ng-click="creaNuovoIndirizzo($index)" ng-class="{anchorDisabled : visDatiAssociazione}"><i
                                                class="fa fa-pencil"></i></a>
                                        <a ng-class="{anchorDisabled : visDatiAssociazione}" ng-click="cancellaIndirizzo($index)"><i
                                                class="fa fa-trash"></i></a>
                                    </td>
                                </tr>
                            </tbody>
                        </table>

                        <div class="row text-right">
                            <div class="col-sm-12">
                                <button class="btn btn-primary" id="anagSearch" ng-disabled="visDatiAssociazione"
                                    ng-click="creaNuovoIndirizzo(-1)">{{
                                    'CREA_NUOVO_INDIRIZZO'
                                    | translate }}</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- --------- -->

            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5> {{ 'ALTRI_DATI' | translate }} {{asteriscoInserimento}} </h5>
                    <div class="ibox-tools">
                        <a class="collapse-link">
                            <i class="fa fa-chevron-up"></i>
                        </a>
                    </div>
                </div>

                <div class="ibox-content">
                    <div class="row">
                        <div class="col-md-4 form-group"><label>{{ 'IMPORTO_RITENUTA_DI_CATEGORIA_QUOTA_MENSILE' | translate }} {{asteriscoInserimento}}</label>
                            <input type="text" ng-readonly="visDatiAssociazione" class="form-control text-right" value="{{datiAssociazione.ImportoRitenutaDiCategoria | currency}} "></div>
                    </div>
                </div>
            </div>
            <!-- --------- -->
            <div ng-if="visDatiAssociazione" visDatiAssociazione class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5> {{ 'ELENCO_RITENUTE_SULLE_LIQUIDAZIONI_MENSILI' | translate }} </h5>
                    <div class="ibox-tools">
                        <a class="collapse-link">
                            <i class="fa fa-chevron-up"></i>
                        </a>
                    </div>
                </div>

                <div class="ibox-content">

                    <table datatable="ng" dt-options="dtOptionsRicercaAssociazioni" class="table table-striped table-bordered dataTables-paged">

                        <thead>
                            <tr>
                                <th class="col-md-4">{{ 'DATA' | translate }}</th>
                                <th class="col-md-4">{{ 'IMPORTO_TOTALE_RITENUTA_DI_CATEGORIA' | translate }}</th>
                                <th class="col-md-4">{{ 'NUMERO_DI_ASSISTITI_PAGANTI' | translate }}</th>
                            </tr>
                        </thead>

                        <tbody>
                            <tr ng-repeat="item in datiAssociazione.LiquidazioniMensili">
                                <td>{{item.DataPagamento}}</td>
                                <td class="text-right">{{item.ImportoTotale | currency}}</td>
                                <td class="text-right">{{item.NroAssistiti}}</td>
                            </tr>
                        </tbody>

                    </table>

                </div>
            </div>

            <!-- SUBMIT BUTTON -->
            <!-- <button type="submit" class="btn btn-primary" ng-disabled="userForm.$invalid">Invia</button> -->
            <div class="row text-right">
                <div ng-if="inserimentoAssociazione || !visDatiAssociazione" class="col-sm-12" style="margin-top:5px;margin-bottom:15px">
                    <button type="submit" class="btn btn-primary" ng-click="salvaModulo()" ng-disabled="userForm.$invalid">{{
                        'SALVA' | translate }}</button>
                </div>
            </div>

        </div>
    </div>
</div>

<script>

    // Custom scripts
    $(document).ready(function () {

        $('.ibox-title').click(function () {
            var cl = $(this).find('.collapse-link');
            var ibox = cl.closest('div.ibox');
            var button = cl.find('i');
            var content = ibox.find('div.ibox-content');
            content.slideToggle(200);
            button.toggleClass('fa-chevron-up').toggleClass('fa-chevron-down');
            ibox.toggleClass('').toggleClass('border-bottom');
            setTimeout(function () {
                ibox.resize();
                ibox.find('[id^=map-]').resize();
            }, 50);
        });

    })


</script>